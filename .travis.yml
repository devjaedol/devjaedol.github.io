language: ruby
cache: bundler

# gemfile: docs/Gemfile
# script:
#   - bundle exec jekyll algolia --source docs --destination docs/_site --config docs/_config.yml

rvm:
 - 2.4

script: bundle install && bundle exec jekyll build

branches:
  only:
    - source

deploy:
  provider: pages
  skip_cleanup: true
  github_token: $GITHUB_TOKEN
  keep_history: true
  local-dir: ./_site
  target-branch: master
  on:
    branch: source